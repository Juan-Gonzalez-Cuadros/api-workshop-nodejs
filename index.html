<!DOCTYPE html>
<html>
    <head>
        <script src="https://www.gstatic.com/firebasejs/8.0/firebase.js"></script>
        <script>
          var config = {
            apiKey: "AIzaSyAd4IclPZmCiZYUBNxxAUjwGdiHHe6WFlk",
            authDomain: "api-workshop-688178.firebaseapp.com",
          };
          firebase.initializeApp(config);
        </script>
    </head>
    <body>
        <div>Identity Platform Demo</div>
        <script type="text/javascript">
            let email = "example@gmail.com";
            let password = "hunter2";
            listenForAuthChanges();
            firebase.auth().signInWithEmailAndPassword(email, password)
            .then((authCredential) => {
                console.log(`user Id: ${authCredential.user.uid}`);
                firebase.auth().signOut();
            })
            .catch(function(error) {
                //Handle errors
                var errorCode = error.code;
                var errorMessage = error.message;
                console(errorMessage);
            });

            function listenForAuthChanges() {
                firebase.auth().onAuthStateChanged((user) => {
                    if (user) {
                        //User is signed in.
                        var email = user.email;
                        var uid = user.uid;
                        console.log(`user ${email} is signed in`);
                    }else {
                        //User is signed out.
                        console.log(`user is signed out`);
                    }
                });
            }
        </script>
    </body>
</html>
